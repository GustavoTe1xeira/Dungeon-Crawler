#include <stdio.h>
#include <windows.h>
#include <stdlib.h>
#include <time.h>
#include <locale.h>
char matriz [15][15];
  int fim=0;
  char tecla;
  int x=7;
  int y=7;
  char chave='@';
  char porta='D';
  void movimentacao(){
	scanf("%c", &tecla);
    	switch(tecla){
			case 'w':
				if(y==1){

				}else{
					y--;
				}


				break;
			case 's':
				if((y==13 && matriz[14][7]=='D')&& (x!=7 || x==7)){

				}else{
					if(y==13 && x!=7){

					}else{

						y++;
						if(y==14 && x==7){
							fim=1;
						}else{}
					}
				}
				break;
			case 'a':
				if(x==1){

				}else{
					x--;
				}
				break;
			case 'd':
				if(x==13){

				}else{
					x++;
				}
				break;
			case 'i':
				if(x==7 && y==3){
					chave=' ';
					porta='=';
				}else{}
			default:
				break;

		}
  }
void Jogo()
{
	while(fim==0){

		MapaPrimeiraFase(matriz,x,y,chave,porta);

		movimentacao();

	}

}

void MapaPrimeiraFase(char matriz[15][15],int x, int y, char chave, char porta){
    int i,j;

		for(i = 0; i < 15; i++)
    {
        for(j = 0; j < 15; j++)
        {
        	if(i==y && j==x){
				matriz[i][j]='&';
			}else{
        		if(i==14 && j==7){
					matriz[i][j]=porta;
				}else{
        			if(i==3 && j==7){
						matriz[i][j]=chave;
					}else{


   					if(i==0 || i==14){
			 	 	 	 	 	 matriz[i][j]='*';printf("\n");

					}else{
						if(j==0 || j==14){
							matriz[i][j]='*';
						}else{

							matriz[i][j]=' ';
					    		}


	    		        }
					}
				}
			}
        }
    }
    system("clear || cls");
    	for(i = 0; i < 15; i++)
    	{
        	for(j = 0; j < 15; j++)
        	{
            printf("%c", matriz[i][j]);
        	}
        	printf("\n");
    	}
}



void Cor(){
printf("\033[0;32m");
}


void Tutorial()
{

 int Prosseguir = 1;

 system("cls||clear");
 printf("1/3 \n");
 sleep(1);
 printf("TUDO BEM VOCE ESCOLHEU O TUTORIAL\n");
 sleep(1);
 printf("O jogo eh do estilo aventura/puzzle onde o objetivo eh o jogador conseguir passar de tres fases. Em cada fase o jogador\ndeve se movimentar para pegar uma chave para abrir a porta fechada\n");
 sleep(3);
 printf("-> FASE 1: Essa fase possui uma dimensao de 15x15 e possui os seguintes elementos: jogador, parede, chave e porta \n");
 sleep(3);
 printf("-> FASE 2: Essa fase possui uma dimensao de 30x30 e possui os seguintes elementos: todos da Fase 1, botao, espinhos e\nMonstro nivel 1 \n");
 sleep(3);
printf("-> FASE 3:  Essa fase possui uma dimensao de 60x60 e possui os seguintes elementos: todos da Fase 2, teletransporte e\nmonstro nivel 2. \n");
sleep(3);

printf("Aperte [1] para avancar: "); scanf("%d", &Prosseguir);

if (Prosseguir == 1){
    system("cls||clear");
    printf("2/3\n");
    sleep(2);
    printf("o jogo possui diversos comandos de locomocao sendo eles: \n");
    sleep(2);
    printf("W: O jogador movimenta uma unidade para cima\nA: O jogador movimenta uma unidade para esquerda\nS: O jogador movimenta uma unidade para baixo\nD: O jogador movimenta uma unidade para direita\nI: O jogador interage com o objeto que esta em cima.\n");
    printf("Aperte [1] para avancar: "); scanf("%d", &Prosseguir);

    system("cls||clear");
    printf("3/3\n");
    sleep(2);
    printf("essas fases sao compostas por alguns elementos: \n");
    sleep(1);
    printf("&: Simbolo que representa o jogador.\n");
    printf("*: Simbolo que representa uma parede, o jogador ao se movimentar não pode passar pela parede.\n");
    printf("@: Simbolo que representa a chave para abrir a porta para finalizar a fase, a porta abre no momento que o jogador interage com a chave.\n");
    printf("D: Simbolo que representa a porta fechada\n");
    printf("=: Simbolo que representa a porta aberta quando o jogador interage com a chave.\n");
    printf("O: Simbolo que representa um botao que o usuario pode interagir, o botao fica no chao e o jogador deve ficar em cima dele para poder interagir.\n");
    printf("#: Simbolo que representa um espinho. A fase eh reiniciada quando o jogador toca no espinho, caso a fase seja reiniciada tres vezes, o jogo volta para o menu principal.\n");
    printf(">: Simbolo que representa um teletransporte. O teletransporte sempre deve vir em pares, quando o jogador toca em um ele eh transportado para o outro e vice-versa.\n");
    printf("¬: Simbolo que representa o monstro nivel 1. O monstro tem um movimento aleatorio, logo, ele movimenta um bloco para \ncima ou para direita ou para esquerda ou para baixo.O monstro sempre faz uma movimentacao depois do usuario se\nmovimentar ou interagir com um objeto.\n");
    printf("K: Simbolo que representa o monstro nivel 2. O monstro nivel dois tem uma inteligencia de se movimentar na direcao do jogador.O monstro nao precisa saber desviar de obstaculos, ele sempre vai andar em linha reta em direcao do jogador.\n");
    sleep(1);

    printf("Aperte [2] para voltar para o menu princpal: "); scanf("%d", &Prosseguir);
    if(Prosseguir == 2){
        system("cls||clear");
        main();    }
}






}




int main(){
int Escolha;

Cor();
printf("           ---------------------------------------\n");

            printf("           *     M     M EEEE N N    N U   U     *\n");
            printf("           *     M M M M E    N  N   N U   U     *\n");
            printf("           *     M  M  M EEE  N   N  N U   U     *\n");
            printf("           *     M     M E    N    N N U   U     *\n");
            printf("           *     M     M EEEE N     N   UUU      *\n");
printf("           ---------------------------------------\n");

printf("BEM VINDO AO JOGO DUNGEON CRAWLER! ESCOLHA UMA DAS OPCOES ABAIXO: \n");
printf("1- JOGAR \n");
printf("2- TUTORIAL\n");
printf("3- SAIR \n");
scanf("%d", &Escolha);

switch(Escolha){

    case 1:
        Jogo();

    case 2:
            Tutorial();
            break;

        case 3:
        printf("SAINDO....");
        break;
      }

return 0;
}
